(this["webpackJsonpblindtest-spotify"]=this["webpackJsonpblindtest-spotify"]||[]).push([[0],{18:function(e,n,t){e.exports=t.p+"static/media/logo.79f6b6a0.svg"},19:function(e,n,t){e.exports=t.p+"static/media/loading.9d4cbf40.svg"},20:function(e,n,t){e.exports=t(55)},25:function(e,n,t){},28:function(e,n,t){},29:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var o=t(0),i=t(17),l=(t(25),t(3)),r=t(7),a=t.n(r),c=t(18),u=t.n(c),s=t(19),d=t.n(s),v=(t(28),t(29),function(e){var n=e.onClick,t=e.children;return o.createElement("button",{onClick:n},t)});function f(e){var n,t=e.track;return void 0===t?null:o.createElement("img",{src:null===(n=t.album.images[0])||void 0===n?void 0:n.url,alt:""})}var m=t(30).default;function h(e){var n=e.playSound,t=e.previewUrl;return void 0===t?null:n?o.createElement(m,{url:t,playStatus:m.status.PLAYING}):null}var p={name:"",id:"",album:{images:[{height:0,url:""}]},preview_url:""};function g(e,n){var t=Math.floor(Math.random()*e);if(void 0===n)return t;for(;n.includes(t);)t=Math.floor(Math.random()*e);return t}var w=function(){var e,n,t,i,r,c,s,m,w,b=Object(o.useState)(!1),E=Object(l.a)(b,2),k=E[0],j=E[1],S=Object(o.useState)(),A=Object(l.a)(S,2),y=A[0],O=A[1],C=Object(o.useState)(!1),N=Object(l.a)(C,2),M=N[0],B=N[1],T=Object(o.useState)(),Y=Object(l.a)(T,2),x=Y[0],Q=Y[1],R=Object(o.useState)(-1),U=Object(l.a)(R,2),X=U[0],q=U[1];Object(o.useEffect)((function(){fetch("https://api.spotify.com/v1/me/tracks",{method:"GET",headers:{Authorization:"Bearer BQATr4YXu7krsiCbzjMQxq2YMkK-dPBn8s-CPiyWaTkM7NXvDSHcnw-R7RYduT2ah9LtQ3St3wCcRCmdXxYuYFHdV-CEXnecbSUDqSYQXEP08VFKOnqULhG6HgJAou8V_UeqfRwAv_rnE6aMAwlZXIQG4E2fej9wQwerKD-31lS7rtE8"}}).then((function(e){return e.json()})).then((function(e){var n;console.log(e),O(e.items),q(g(e.items.length)),Q(null===(n=e.items[X])||void 0===n?void 0:n.track)})),j(!0),w=setTimeout((function(){return L()}),3e4)}),[]);var L=function(){var e;if(y){var n=g(y.length,[X]);q(n),Q(null===y||void 0===y||null===(e=y[n])||void 0===e?void 0:e.track)}},W=g(null!==(e=null===y||void 0===y?void 0:y.length)&&void 0!==e?e:0,[X]),G=g(null!==(n=null===y||void 0===y?void 0:y.length)&&void 0!==n?n:0,[X,W]),P=x,_=null===y||void 0===y||null===(t=y[W])||void 0===t?void 0:t.track,D=null===y||void 0===y||null===(i=y[G])||void 0===i?void 0:i.track,F=[null!==P&&void 0!==P?P:p,null!==_&&void 0!==_?_:p,null!==D&&void 0!==D?D:p];return function(e){if(void 0!==e)for(var n=e.length-1;n>0;n--){var t,o,i=Math.floor(Math.random()*(n+1)),l=[null!==(t=e[i])&&void 0!==t?t:p,null!==(o=e[n])&&void 0!==o?o:p];e[n]=l[0],e[i]=l[1]}}(F),o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),o.createElement("h1",{className:"App-title"},"Bonjour, il y a ".concat(null===y||void 0===y?void 0:y.length," musiques"))),o.createElement("div",{className:"App-images"},k?o.createElement(o.Fragment,null,o.createElement(f,{track:null!==(r=null===y||void 0===y||null===(c=y[0])||void 0===c?void 0:c.track)&&void 0!==r?r:void 0}),o.createElement(h,{playSound:M,previewUrl:null!==(s=null===y||void 0===y||null===(m=y[0])||void 0===m?void 0:m.track.preview_url)&&void 0!==s?s:void 0}),o.createElement(v,{onClick:function(){return B(!0)}},"Start")):o.createElement("img",{src:d.a,className:"App-logo",alt:"logo"})),o.createElement("div",{className:"App-buttons"},F.map((function(e){return o.createElement(v,{onClick:function(){(null===e||void 0===e?void 0:e.id)===(null===x||void 0===x?void 0:x.id)?(clearTimeout(w),a()("Bravo","Tu as gagn\xe9","success").then((function(){return L()}))):a()("Rat\xe9","Ce n'est pas la bonne r\xe9ponse","error")}},null===e||void 0===e?void 0:e.name)}))))},b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!==n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.render(o.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/blindtest-spotify",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/blindtest-spotify","/service-worker.js");b?function(e){fetch(e).then((function(n){var t;404===n.status||-1===(null===(t=n.headers.get("content-type"))||void 0===t?void 0:t.indexOf("javascript"))?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):E(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):E(e)}))}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.3990f68a.chunk.js.map