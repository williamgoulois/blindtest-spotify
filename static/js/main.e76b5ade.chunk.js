(this["webpackJsonpblindtest-spotify"]=this["webpackJsonpblindtest-spotify"]||[]).push([[0],{18:function(e,t,n){e.exports=n.p+"static/media/logo.79f6b6a0.svg"},19:function(e,t,n){e.exports=n.p+"static/media/loading.9d4cbf40.svg"},20:function(e,t,n){e.exports=n(55)},25:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n(17),r=(n(25),n(7)),a=n(6),l=n.n(a),c=n(18),s=n.n(c),u=n(19),d=n.n(u),v=(n(28),n(29),function(e){var t=e.onClick,n=e.children;return o.createElement("button",{onClick:t},n)});function f(e){var t,n=e.track,i=e.style;return void 0===n?null:o.createElement("img",{style:i,src:null===(t=n.album.images[0])||void 0===t?void 0:t.url,alt:""})}var m=n(30).default;function h(e){var t=e.previewUrl;return o.createElement(m,{url:t,playStatus:m.status.PLAYING})}var p={name:"",id:"",album:{images:[{height:0,url:""}]},preview_url:""};function g(e,t){var n=Math.floor(Math.random()*e);if(void 0===t)return n;for(;t.includes(n);)n=Math.floor(Math.random()*e);return n}var w=function(){var e,t,n,i,a,c=Object(o.useState)(),u=Object(r.a)(c,2),m=u[0],w=u[1],b=Object(o.useState)({track:p,index:-1}),k=Object(r.a)(b,2),E=k[0],y=k[1];if(Object(o.useEffect)((function(){fetch("https://api.spotify.com/v1/me/tracks",{method:"GET",headers:{Authorization:"Bearer BQB1palzECyR3UN_fPUETsvzyn3IRPXLw2Uoh-c-Q8WP1u6DtgqTXsTSETgLiyuk8wr_7OvRFONNu4CHC_Rw48jluemdm-QhUrIbYz0yy0XbTbr7Rvols_F67bu-U9IcJppYFO95WdJijMbmIQP6jeJEvbd9jbxR-9AgAqF5TNAgOrVc"}}).then((function(e){return e.json()})).then((function(e){var t,n;w(e.items);var o=g(e.items.length);y({track:null!==(t=null===(n=e.items[o])||void 0===n?void 0:n.track)&&void 0!==t?t:p,index:o})}))}),[]),Object(o.useEffect)((function(){a=setTimeout((function(){return N()}),3e4)})),void 0===m||-1===E.index)return o.createElement("div",{className:"App"},o.createElement("img",{src:d.a,className:"App-logo",alt:"logo"}));var N=function(){var e,t;if(void 0!==m){var n=g(m.length,[E.index]);y({track:null!==(e=null===m||void 0===m||null===(t=m[n])||void 0===t?void 0:t.track)&&void 0!==e?e:p,index:n})}},j=g(m.length,[E.index]),A=g(m.length,[E.index,j]),x=E.track,O=null===(e=m[j])||void 0===e?void 0:e.track,T=null===(t=m[A])||void 0===t?void 0:t.track,C=[x,null!==O&&void 0!==O?O:p,null!==T&&void 0!==T?T:p];return function(e){if(void 0!==e)for(var t=e.length-1;t>0;t--){var n,o,i=Math.floor(Math.random()*(t+1)),r=[null!==(n=e[i])&&void 0!==n?n:p,null!==(o=e[t])&&void 0!==o?o:p];e[t]=r[0],e[i]=r[1]}}(C),o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("img",{src:s.a,className:"App-logo",alt:"logo"}),m&&o.createElement("h1",{className:"App-title"},"Bonjour, il y a ".concat(null===m||void 0===m?void 0:m.length," musiques"))),o.createElement("div",{className:"App-images"},o.createElement(f,{style:{height:400,width:400},track:null!==(n=E.track)&&void 0!==n?n:p}),o.createElement(h,{previewUrl:null!==(i=E.track.preview_url)&&void 0!==i?i:void 0})),o.createElement("div",{className:"App-buttons"},-1!==E.index&&C.map((function(e){return o.createElement(v,{key:e.id,onClick:function(){e.id===E.track.id?(clearTimeout(a),l()("Bravo","Tu as gagn\xe9","success").then((function(){return N()}))):l()("Rat\xe9","Ce n'est pas la bonne r\xe9ponse","error")}},e.name)}))))},b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!==t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.render(o.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/blindtest-spotify",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/blindtest-spotify","/service-worker.js");b?function(e){fetch(e).then((function(t){var n;404===t.status||-1===(null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.indexOf("javascript"))?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):k(e)}))}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.e76b5ade.chunk.js.map